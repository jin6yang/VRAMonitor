<Page
    x:Class="VRAMonitor.Views.Pages.AboutPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:VRAMonitor.Views.Pages"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:dev="using:DevWinUI"
    mc:Ignorable="d">

    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.ThemeDictionaries>
                <ResourceDictionary x:Key="Light">
                    <x:Double x:Key="LightImageOpacity">1.0</x:Double>
                    <x:Double x:Key="DarkImageOpacity">0.0</x:Double>
                </ResourceDictionary>
                <ResourceDictionary x:Key="Dark">
                    <x:Double x:Key="LightImageOpacity">0.0</x:Double>
                    <x:Double x:Key="DarkImageOpacity">1.0</x:Double>
                </ResourceDictionary>
            </ResourceDictionary.ThemeDictionaries>

            <ThemeShadow x:Key="SharedShadow" />
        </ResourceDictionary>
    </Page.Resources>

    <Grid Padding="24" UseLayoutRounding="True">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" MinWidth="300"/>
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- 左侧：图片卡片区域 -->
        <Grid Grid.Column="0">

            <!-- 【1. 布局占位层】 -->
            <!-- 保持不可见，仅用于撑开布局尺寸 -->
            <Image Source="ms-appx:///Assets/AboutPageIconBackgroundLight.png" 
                   Stretch="UniformToFill"
                   Opacity="0" />

            <!-- 【2. 视觉容器 + 修复黑边方案】 -->
            <!-- 
               方案 A: Background 设置为实体背景色 (SolidBackgroundFillColorBaseBrush)。
                       这就像给图片打了“粉底”，边缘半透明像素会与这个颜色混合，而不是与黑色混合。
               方案 B: CornerRadius="8" 在这里进行裁剪。
            -->
            <Grid CornerRadius="8" 
                  Background="{ThemeResource SolidBackgroundFillColorBaseBrush}">

                <!-- 【3. 亮色图层】 -->
                <!-- 方案 C: ScaleX/Y="1.01" (微量放大)。
                       让图片比裁剪框稍微大一点点 (1%)。这样裁剪线切下去的时候，
                       切到的是图片内部饱满的像素，彻底避免边缘像素不足产生的黑线。 -->
                <Border Opacity="{ThemeResource LightImageOpacity}">
                    <Border.Background>
                        <ImageBrush ImageSource="ms-appx:///Assets/AboutPageIconBackgroundLight.png" 
                                    Stretch="UniformToFill"/>
                    </Border.Background>
                    <Border.RenderTransform>
                        <ScaleTransform ScaleX="1.01" ScaleY="1.01" CenterX="160" CenterY="160"/>
                    </Border.RenderTransform>
                </Border>

                <!-- 【4. 深色图层】 -->
                <Border Opacity="{ThemeResource DarkImageOpacity}">
                    <Border.Background>
                        <ImageBrush ImageSource="ms-appx:///Assets/AboutPageIconBackgroundDark.png" 
                                    Stretch="UniformToFill"/>
                    </Border.Background>
                    <Border.RenderTransform>
                        <ScaleTransform ScaleX="1.01" ScaleY="1.01" CenterX="160" CenterY="160"/>
                    </Border.RenderTransform>
                </Border>
            </Grid>

            <!-- 【5. ICON 层】 -->
            <Grid VerticalAlignment="Center" HorizontalAlignment="Center">
                <Border Width="160" Height="160"
                        CornerRadius="32" 
                        Background="{ThemeResource SolidBackgroundFillColorBaseBrush}" 
                        Opacity="0.9"
                        Translation="0,0,32"
                        Shadow="{StaticResource SharedShadow}">
                    <Image Source="ms-appx:///Assets/VRAMonitor-Icon-512.png" 
                           Margin="20"/>
                </Border>
            </Grid>
        </Grid>

        <!-- 右侧：信息区域 -->
        <StackPanel Grid.Column="1" 
                    VerticalAlignment="Center" 
                    Spacing="12" 
                    Margin="48,0,0,0">

            <Viewbox StretchDirection="DownOnly" HorizontalAlignment="Left">
                <TextBlock Text="VRAMonitor" 
                           Style="{ThemeResource DisplayTextBlockStyle}" 
                           FontWeight="SemiBold"/>
            </Viewbox>

            <StackPanel Orientation="Horizontal" Spacing="8">
                <TextBlock Text="{x:Bind ViewModel.AppVersion, Mode=OneWay}" 
                           Style="{ThemeResource TitleTextBlockStyle}"/>
                <Border Background="{ThemeResource SystemControlHighlightAccentBrush}" 
                        CornerRadius="4" VerticalAlignment="Center" Padding="6,2">
                    <TextBlock Text="Preview" FontSize="12" Foreground="White" FontWeight="Bold"/>
                </Border>
            </StackPanel>

            <StackPanel Orientation="Horizontal" Spacing="4" Margin="0,8,0,24">
                <TextBlock Text="由 POINTER 用" Style="{ThemeResource BodyTextBlockStyle}"/>
                <TextBlock Text="❤️" Foreground="Red" />
                <TextBlock Text="制作" Style="{ThemeResource BodyTextBlockStyle}"/>
            </StackPanel>

            <MenuFlyoutSeparator />

            <TextBlock Text="开源地址 :" Style="{ThemeResource SubtitleTextBlockStyle}" Margin="0,12,0,0"/>
            <HyperlinkButton Content="https://github.com/jin6yang/VRAMonitor" 
                             NavigateUri="https://github.com/jin6yang/VRAMonitor"
                             HorizontalAlignment="Left"/>

            <TextBlock Text="开源协议 :" Style="{ThemeResource SubtitleTextBlockStyle}" Margin="0,8,0,0"/>
            <TextBlock Text="GPLv3" Style="{ThemeResource BodyTextBlockStyle}" Opacity="0.8"/>

            <TextBlock Text="在线文档 :" Style="{ThemeResource SubtitleTextBlockStyle}" Margin="0,8,0,0"/>
            <StackPanel Spacing="4">
                <HyperlinkButton Content="查看 README (GitHub)" 
                                 NavigateUri="https://github.com/jin6yang/VRAMonitor/blob/main/README.md"
                                 HorizontalAlignment="Left"/>
                <HyperlinkButton Content="查看 Wiki (Feishu/Lark)" 
                                 NavigateUri="https://ai.feishu.cn/wiki/GOcMwgf9jiEmzVkBMBQcJncTnsg?from=from_copylink"
                                 HorizontalAlignment="Left"/>
            </StackPanel>
        </StackPanel>
    </Grid>
</Page>